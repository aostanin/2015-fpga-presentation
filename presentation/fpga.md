% FPGAたのしす
% あんちゃん
% 平成27年7月10日


FPGAって何？
================================================================================


--------------------------------------------------------------------------------

\centerline{\includegraphics[height=2.8in]{img/xilinx-spartan6.jpg}}


Field Programmable Gate Array
--------------------------------------------------------------------------------

Wikipediaより

- Field Programmable：\ruby{製造}{せいぞう}後に購入者や設計者が\ruby{構成}{こうせい}を設定できる
- Gate Array：\ruby{集積}{しゅうせき}回路

つまり、いろんなロジックのブロックがあって、つなぎ方は自由で変わる事が出来る


何に使う？
================================================================================


何に使う？
--------------------------------------------------------------------------------

- ハードウェアのプロトタイプ
- 複数のロジックチップを一つのFPGAで実装
- アップデートでロジック変わる事が出来る

. . .

割とつまらない使い方がほとんど


おもしろい使い方
--------------------------------------------------------------------------------

- [FPGAArcade](http://www.fpgaarcade.com/)
    - 昔のアケードゲームハードウェアをFPGAで
- [fpga_nes](https://github.com/brianbennett/fpga_nes)
    - FPGAでファミコン
- [Milkymist](http://m-labs.hk/)
    - FPGAのビデオシンセサイザーとミキサー
- [NeoVGA](http://mikejmoffitt.com/wp/?p=270)
    - ネオジオのラインダブラー

. . .

他にいっぱいありすぎる！


どうやって使う？
================================================================================


HDL
--------------------------------------------------------------------------------

\begin{beamercolorbox}[wd=\textwidth,rounded=true,shadow=true]{quote}
\begin{center}
Hardware Description Language

ハードウェア\ruby{記述}{きじゅつ}言語
\end{center}
\end{beamercolorbox}


HDL
--------------------------------------------------------------------------------

ソフトウェアプログラミングと結構違う

- CPUに「何して欲しい」じゃなくて、ハードウェアに「何になって欲しい」
- 全部同時実行
- ローレベル


言語
--------------------------------------------------------------------------------

２つの人気な言語がある

- [Verilog](https://en.wikipedia.org/wiki/Verilog)
    - C言語にちょっと似てる
    - アメリカで人気
- [VHDL](https://en.wikipedia.org/wiki/VHDL)
    - ADA言語に似てる
    - ヨーロッパで人気


言語
--------------------------------------------------------------------------------

最近は他の言語で書いてVerilog書き出す言語が増えてる

- [MyHDL](http://www.myhdl.org/)
    - PythonでHDL書ける
- [Migen](https://github.com/m-labs/migen)
    - PythonでHDL書ける（Milkymistで使ってる）
- [Chisel](https://chisel.eecs.berkeley.edu/)
    - ScalaでHDL書ける


[Terasic DE0-Nano](http://www.terasic.com.tw/_sub/de0-nano)
--------------------------------------------------------------------------------

\centerline{\includegraphics[height=2.8in]{img/terasic-de0nano.jpg}}


[Quartus](https://dl.altera.com/?edition=web)
--------------------------------------------------------------------------------

- Alteraが作っているFPGAの開発環境
- デカい(14GB)
- あまり良くない
- 使うしかない…


デモ
================================================================================


GitHub
--------------------------------------------------------------------------------

[https://github.com/aostanin/2015-fpga-presentation](https://github.com/aostanin/2015-fpga-presentation)


1 ボタンでLEDを光らそう
--------------------------------------------------------------------------------

デモ


2 カウンターを作ろう
--------------------------------------------------------------------------------

デモ


3 CPUを使おう
--------------------------------------------------------------------------------

\centerline{\includegraphics[width=4.8in]{img/motorola-68k.jpg}}


4 ソフトを書いてみよう
--------------------------------------------------------------------------------

68000でプログラムを動かすには何が必要？

- ROM
    - どこかから次のインストラクションを読み込まないと
- I/O
    - 何もI/Oが無いと動いているかどうか分からない
- クロスコンパイラ


5 C言語で書いてみよう
--------------------------------------------------------------------------------

C言語で書くには何が必要？

- RAM
    - スタックポインターはRAMに保存しないと
- リンカスクリプト
    - メモリーの何処に書き込んだり出来るかは知るべき


以上
--------------------------------------------------------------------------------

\begin{center}楽しいでしょう！\end{center}

\begin{center}質問？\end{center}

